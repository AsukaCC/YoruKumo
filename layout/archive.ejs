<%- partial('_partial/header',{}, {cache: true}) %>
<div class="archive-container">
  <div class="archive-content">
    <h1 class="archive-title"><%- __('archive.title') %></h1>
    <div class="archive-posts">
      <% var lastYear; %> <% page.posts.each(function(post){ %> <% var year =
      date(post.date, 'YYYY'); %> <% if (lastYear !== year){ %>
      <div class="archive-year">
        <h2><%= year %></h2>
      </div>
      <% lastYear = year; %> <% } %>
      <div class="archive-post">
        <span class="archive-post-time"><%= date(post.date, 'MM-DD') %></span>
        <a class="archive-post-title" href="<%- url_for(post.path) %>">
          <%= post.title || '(no title)' %>
        </a>
      </div>
      <% }) %>
    </div>

    <% if (page.total > 1) { %>
    <nav class="pagination">
      <% if (page.prev) { %>
      <a class="page-prev" href="<%- url_for(page.prev_link) %>">‹ 上一页</a>
      <% } %>
      <span class="page-number">
        <%= page.current %> / <%= Math.ceil(page.total / config.per_page) %>
      </span>
      <% if (page.next) { %>
      <a class="page-next" href="<%- url_for(page.next_link) %>">下一页 ›</a>
      <% } %>
    </nav>
    <% } %>
  </div>
</div>
